CREATE TABLE appointments
(
    id         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    doctor_id  BIGINT,
    patient_id BIGINT,
    date       TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT pk_appointments PRIMARY KEY (id)
);

ALTER TABLE appointments
    ADD CONSTRAINT FK_APPOINTMENTS_ON_DOCTOR FOREIGN KEY (doctor_id) REFERENCES doctors (id);

ALTER TABLE appointments
    ADD CONSTRAINT FK_APPOINTMENTS_ON_PATIENT FOREIGN KEY (patient_id) REFERENCES patient (id);

ALTER TABLE patient
    ALTER COLUMN cpf SET NOT NULL;

ALTER TABLE patient
    ALTER COLUMN email SET NOT NULL;

ALTER TABLE patient
    ALTER COLUMN name SET NOT NULL;

ALTER TABLE patient
    ALTER COLUMN phone_number SET NOT NULL;